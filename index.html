<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Portfolio Viewer</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <div class="controls">
    <button id="prevBtn">← Prev</button>
    <button id="zoomOutBtn">−</button>
    <span id="zoomValue">100%</span>
    <button id="zoomInBtn">+</button>
    <button id="nextBtn">Next →</button>
    <a id="pdfDownload" href="portfolio_print.pdf" download>Download PDF</a>
  </div>

  <div class="viewport">
    <div class="portfolio-container" id="portfolioContainer"></div>
  </div>

  <script>
    const container = document.getElementById("portfolioContainer");
    const zoomValue = document.getElementById("zoomValue");

    let currentIndex = 0;
    let zoomLevel = 1.0;
    const totalPages = 70;

    function createPageWrapper(i) {
      const wrapper = document.createElement("div");
      wrapper.className = "page-wrapper";
      wrapper.style.transform = `scale(${zoomLevel})`;
      wrapper.style.backgroundColor = "#ffffff";

      const num = (i + 1).toString().padStart(2, "0");
      const object = document.createElement("object");
      object.data = `svgs/Portfolio-${num}.svg`;
      object.type = "image/svg+xml";
      object.className = "portfolio-page";

      wrapper.appendChild(object);
      return wrapper;
    }

    function renderPages() {
      container.innerHTML = "";

      if (currentIndex === 0) {
        const single = createPageWrapper(0);
        single.classList.add("single");
        container.appendChild(single);
      } else {
        const left = currentIndex;
        const right = currentIndex + 1;

        if (left < totalPages) container.appendChild(createPageWrapper(left));
        if (right < totalPages) container.appendChild(createPageWrapper(right));
      }

      updateContainerGap();
    }

    function updateZoom() {
      zoomValue.textContent = `${Math.round(zoomLevel * 100)}%`;
      renderPages();
    }

    function updateContainerGap() {
      const baseGap = window.innerWidth * 0.04; // 4vw
      const newGap = baseGap * zoomLevel;
      container.style.gap = `${newGap}px`;
    }

    document.getElementById("prevBtn").addEventListener("click", () => {
      if (currentIndex === 0) return;
      currentIndex = Math.max(0, currentIndex - 2);
      renderPages();
    });

    document.getElementById("nextBtn").addEventListener("click", () => {
      if (currentIndex === 0) currentIndex = 1;
      else currentIndex = Math.min(totalPages - 1, currentIndex + 2);
      renderPages();
    });

    document.getElementById("zoomInBtn").addEventListener("click", () => {
      zoomLevel = Math.min(2.0, zoomLevel + 0.1);
      updateZoom();
    });

    document.getElementById("zoomOutBtn").addEventListener("click", () => {
      zoomLevel = Math.max(0.5, zoomLevel - 0.1);
      updateZoom();
    });

    renderPages();
  </script>

</body>
</html>

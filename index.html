<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Portfolio Viewer</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="controls">
    <button id="prevPage">← Previous</button>
    <button id="zoomOut">−</button>
    <span id="zoomDisplay">100%</span>
    <button id="zoomIn">＋</button>
    <button id="nextPage">Next →</button>
    <a href="portfolio_print.pdf" class="download-btn" download>Download PDF</a>
  </div>

  <div class="portfolio-container" id="portfolioContainer"></div>

  <script>
    const totalPages = 70;
    let currentIndex = 0;
    let scale = 1.0;

    const container = document.getElementById("portfolioContainer");

    function formatPageNumber(i) {
      return i.toString().padStart(2, '0');
    }

    function updateZoomDisplay() {
      document.getElementById("zoomDisplay").textContent = `${Math.round(scale * 100)}%`;
    }

    function renderPages() {
      container.innerHTML = "";

      const wrapper = document.createElement("div");
      wrapper.className = "spread";

      if (currentIndex === 0) {
        const empty = document.createElement("div");
        empty.className = "page-wrapper empty";
        wrapper.appendChild(empty);

        const pageWrapper = createPageWrapper(1);
        wrapper.appendChild(pageWrapper);
      } else {
        for (let i = 0; i < 2; i++) {
          const pageNum = currentIndex + i + 1;
          if (pageNum > totalPages) break;
          const pageWrapper = createPageWrapper(pageNum);
          wrapper.appendChild(pageWrapper);
        }
      }

      container.appendChild(wrapper);
      updateZoomDisplay();
    }

    function createPageWrapper(pageNum) {
      const wrapper = document.createElement("div");
      wrapper.className = "page-wrapper";
      wrapper.style.overflowX = "auto";

      const inner = document.createElement("div");
      inner.className = "page-inner";
      inner.style.transform = `scale(${scale})`;
      inner.style.transformOrigin = "top left";
      inner.style.width = `${100 / scale}%`;

      const img = document.createElement("img");
      img.src = `svgs/Portfolio-${formatPageNumber(pageNum)}.svg`;
      img.alt = `Portfolio Page ${pageNum}`;
      img.className = "portfolio-page";

      inner.appendChild(img);
      wrapper.appendChild(inner);
      return wrapper;
    }

    function applyZoom() {
      document.querySelectorAll(".page-inner").forEach(inner => {
        inner.style.transform = `scale(${scale})`;
        inner.style.width = `${100 / scale}%`;
      });
      updateZoomDisplay();
    }

    document.getElementById("zoomIn").addEventListener("click", () => {
      scale = Math.min(scale + 0.1, 2);
      applyZoom();
    });

    document.getElementById("zoomOut").addEventListener("click", () => {
      scale = Math.max(scale - 0.1, 0.5);
      applyZoom();
    });

    document.getElementById("nextPage").addEventListener("click", () => {
      if (currentIndex === 0) {
        currentIndex = 1;
      } else {
        currentIndex += 2;
      }
      if (currentIndex >= totalPages) {
        currentIndex = totalPages - (totalPages % 2 === 0 ? 2 : 1);
      }
      renderPages();
    });

    document.getElementById("prevPage").addEventListener("click", () => {
      if (currentIndex <= 1) {
        currentIndex = 0;
      } else {
        currentIndex -= 2;
      }
      renderPages();
    });

    renderPages();
  </script>
</body>
</html>
